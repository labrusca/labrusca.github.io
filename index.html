<!DOCTYPE html>
<html>
	<head>
		<title>Light of Seraphim - Labrusca's Blog</title>

		<!-- meta -->
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="懒人Labrusca的个人博客" />
		<meta name="keywords" content="labrusca, Blog, Light of Seraphim, 网络安全, 信息安全, 渗透测试, 博客, 以马内利" />
		<link rel="manifest" href="/manifest.json">

	    <!-- css -->
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/ionicons.min.css">
		<link rel="stylesheet" href="css/pace.css">
		<link rel="stylesheet" href="css/animate.css">
		<link rel="stylesheet" href="css/custom.css">
		<!-- Merry Christmas! -->
		<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">

	    <!-- js -->
	    <script src="js/jquery-3.3.1.min.js"></script>
	    <script src="js/bootstrap.min.js"></script>
	    <script src="js/pace.min.js"></script>
		<script src="js/modernizr.custom.js"></script>
		<script src="js/director.min.js"></script>
		<script src="js/xss.min.js"></script>
		<!-- <script src="//cdn.bootcss.com/voca/1.4.0/voca.min.js"></script> -->
		<script src="js/ejs.js"></script>
		<script src="js/marked.min.js"></script>
		<script src='//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
		</script>
		<script src="js/func.js"></script>
	</head>

	<body>
		<div id="header-insert" class="container">	
			<!-- header here -->
		</div>

		<div id="cbody" class="content-body">
			<div class="alert alert-danger">你的浏览器好像不兼容，刷新或者换个浏览器试试？</div>
		</div>
		<script async src="js/busuanzi.pure.mini.js"></script>

		<!-- footer here -->

		<script src="js/search.js"></script>
		<script src="js/jquery.snow.js"></script>
		<script async src="js/easter-eggs.js"></script>
		<script>
			$().ready(() => {
				$.get("feed.json", (data,status) => {
					//let html = new EJS({url: 'views/footer.ejs'}).render(date);
					$("#cbody").html(loadEjs('views/main.ejs', data))
					$("#header-insert").append(loadEjs('views/header.ejs', data))
					$("body").append(loadEjs('views/footer.ejs', data))
					let n=0;
					$("#cbody").animateCss('fadeIn');
					for(;n<4;n++) {
						$("#arl-list").append(loadEjs('views/list.ejs', data.items[n]))
					}
					$(window).scroll(() => {
						var scrollTop = $(this).scrollTop()
						var scrollHeight = $(document).height()
						var windowHeight = $(this).height()
						if (scrollTop + windowHeight == scrollHeight) {
							//console.log()
							data.items.slice(n,n+4).forEach(item => {
								$("#arl-list").append(loadEjs('views/list.ejs', item))
								$(`#${btoa(item.id)}`).animateCss('fadeIn');
							})
							n += 5;
						}
					})
				})
			})
		</script>
		<script>
			if ('serviceWorker' in navigator) {
				window.addEventListener('load', function() {
					navigator.serviceWorker.register('service-worker.js').then(function(registration) {
						// Registration was successful
						console.log('ServiceWorker registration successful with scope: ', registration.scope);
					}, function(err) {
						// registration failed :/
						console.log('ServiceWorker registration failed: ', err);
					});
				});
			}
		</script>
	</body>
</html>
